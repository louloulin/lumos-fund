# LumosFund 使用指南

## 1. 系统概述

LumosFund是一个AI驱动的量化交易平台，集成了多种投资风格和策略，旨在帮助投资者做出更明智、更系统化的投资决策。系统基于Mastra AI框架，通过专业化的AI代理模拟不同投资风格，从多角度分析股票和市场。

## 2. 快速开始

### 2.1 环境配置

在开始使用LumosFund前，需要完成以下环境配置：

1. **安装必要依赖**:
```bash
# 使用pnpm安装依赖
pnpm install
```

2. **配置环境变量**:
创建`.env.local`文件，并配置以下必要的API密钥：
```
QWEN_API_KEY=your_qwen_api_key
ALPHAVANTAGE_API_KEY=your_alphavantage_api_key
FINNHUB_API_KEY=your_finnhub_api_key
NEWS_API_KEY=your_news_api_key
```

3. **启动开发服务器**:
```bash
# 开发模式启动
pnpm dev

# 或使用脚本启动
./run-dev.sh
```

### 2.2 浏览器访问

启动成功后，可通过浏览器访问系统：
- 本地开发环境: http://localhost:3000
- 生产环境: https://your-production-url.com

## 3. 用户界面导航

LumosFund提供了直观的用户界面，主要包括以下几个部分：

### 3.1 仪表盘 (Dashboard)

仪表盘提供了整体市场概览和投资组合状态：
- 主要市场指数表现
- 投资组合价值和收益统计
- 资产配置比例图表
- 最近交易记录
- 重要市场新闻

![仪表盘截图](../public/images/dashboard.png)

### 3.2 股票分析 (Stock Analysis)

股票分析页面允许用户查看特定股票的详细分析：
1. 在搜索框中输入股票代码（如"AAPL"）
2. 系统将自动执行AI分析
3. 查看多维度分析结果，包括：
   - 价值投资分析
   - 成长投资分析
   - 技术分析图表
   - 情绪分析结果
   - 综合投资建议

![股票分析截图](../public/images/stock-analysis.png)

### 3.3 投资组合管理 (Portfolio Management)

投资组合管理页面提供了以下功能：
- 添加/删除持仓股票
- 调整持仓比例
- 执行投资组合优化
- 查看历史表现
- 分析投资组合风险

使用步骤：
1. 点击"添加股票"添加新持仓
2. 输入股票代码、买入价格和数量
3. 使用"优化"按钮获取投资组合优化建议
4. 应用建议或手动调整持仓

![投资组合管理截图](../public/images/portfolio.png)

### 3.4 交易模拟 (Trading Simulation)

交易模拟页面允许用户测试不同的交易策略：
1. 选择起始资金和时间范围
2. 选择要使用的AI代理组合
3. 设置风险参数和交易规则
4. 启动模拟交易
5. 查看模拟结果和表现分析

![交易模拟截图](../public/images/trading-sim.png)

## 4. 功能详解

### 4.1 股票分析功能

#### 4.1.1 执行股票分析

可通过多种方式执行股票分析：
- 在搜索框直接输入股票代码
- 从投资组合页面点击特定股票的"分析"按钮
- 从市场扫描结果中选择感兴趣的股票

分析执行后，系统将提供以下内容：
- **基本信息**：公司概况、行业分类、市值等
- **价格数据**：历史价格走势、成交量、相对强弱等
- **基本面分析**：财务指标、估值、增长趋势等
- **技术分析**：主要技术指标、支撑阻力位、图形模式等
- **情绪分析**：新闻情绪、社交媒体情绪、分析师评级等
- **投资建议**：综合评分、买入/卖出/持有建议、目标价格区间

#### 4.1.2 分析报告解读

分析报告分为多个部分，用户可关注以下关键指标：
- **综合评分**：0-10分，代表整体投资吸引力
- **风险评级**：低/中/高，表示投资风险程度
- **置信度**：代表系统对分析结果的确信程度
- **目标价格**：低/基准/高三个价格水平
- **时间框架**：短期/中期/长期推荐

#### 4.1.3 自定义分析参数

用户可以自定义分析参数，使分析更符合个人需求：
1. 点击"自定义分析"按钮
2. 调整以下参数：
   - 分析时间范围
   - 使用的AI代理组合
   - 风险容忍度
   - 投资期限
3. 点击"重新分析"生成更新的结果

### 4.2 投资组合管理功能

#### 4.2.1 创建投资组合

创建新投资组合步骤：
1. 在投资组合页面点击"新建投资组合"
2. 输入投资组合名称和描述
3. 设置初始资金金额
4. 选择风险偏好（保守/适中/激进）
5. 点击"创建"完成设置

#### 4.2.2 管理持仓

管理投资组合持仓：
1. 点击"添加股票"添加新持仓
2. 对于现有持仓，可执行以下操作：
   - 编辑：调整持仓数量或成本价
   - 删除：完全移除持仓
   - 分析：查看该股票的详细分析
   - 交易：执行买入或卖出操作

#### 4.2.3 投资组合优化

优化投资组合配置：
1. 点击"优化投资组合"按钮
2. 选择优化目标：
   - 最大化夏普比率
   - 最小化风险
   - 最大化回报
   - 平衡型（默认）
3. 点击"执行优化"
4. 查看优化建议，包括：
   - 最优资产配置比例
   - 建议的买入/卖出操作
   - 优化后的预期风险和回报
5. 点击"应用优化"自动执行建议的调整

#### 4.2.4 表现分析

分析投资组合历史表现：
1. 在投资组合页面点击"表现分析"标签
2. 查看以下指标：
   - 总回报率（绝对值和年化）
   - 波动率
   - 夏普比率
   - 最大回撤
   - 与基准指数的对比
   - 贡献分析（哪些股票贡献最大）

### 4.3 交易模拟功能

#### 4.3.1 设置模拟参数

配置交易模拟参数：
1. 选择模拟起始时间和结束时间
2. 设置初始资金金额
3. 选择交易策略：
   - 价值投资策略
   - 成长投资策略
   - 趋势跟踪策略
   - 量化因子策略
   - 混合策略
4. 设置交易规则：
   - 最大持仓比例
   - 单笔交易最大比例
   - 止损/止盈点位
   - 交易频率

#### 4.3.2 执行和监控模拟

运行模拟交易：
1. 点击"开始模拟"按钮
2. 实时查看交易执行情况
3. 查看投资组合变化和表现
4. 点击"暂停"可暂停模拟
5. 点击"调整参数"可在模拟过程中修改参数

#### 4.3.3 分析模拟结果

分析模拟交易结果：
1. 查看总体表现指标
2. 分析交易记录，了解买卖决策
3. 查看特定时期的表现细节
4. 比较不同策略的表现差异
5. 导出模拟结果，用于进一步分析

## 5. API使用

### 5.1 股票分析API

#### 5.1.1 基本用法

**端点**: `/api/analyze`

**方法**: `POST`

**请求体**:
```json
{
  "ticker": "AAPL",
  "currentPosition": {
    "shares": 10,
    "averagePrice": 150.0,
    "entryDate": "2023-01-15"
  },
  "riskTolerance": "moderate",
  "investmentHorizon": "medium"
}
```

**响应**:
```json
{
  "success": true,
  "data": {
    "ticker": "AAPL",
    "stockData": { /* 价格和基本信息 */ },
    "technicalAnalysis": "技术分析结果...",
    "sentimentAnalysis": "情绪分析结果...",
    "strategyRecommendation": "策略建议结果..."
  }
}
```

#### 5.1.2 高级参数

分析API支持以下高级参数：

- **timeRange**: 分析的时间范围（如"1y", "6m", "3m"）
- **agents**: 要使用的AI代理列表（如["value", "growth", "technical"]）
- **includePrediction**: 是否包含价格预测（布尔值）
- **includeFinancials**: 是否包含详细财务数据（布尔值）

### 5.2 投资组合API

#### 5.2.1 获取投资组合

**端点**: `/api/portfolio`

**方法**: `GET`

**响应**:
```json
{
  "success": true,
  "data": {
    "portfolioId": "portfolio123",
    "name": "我的投资组合",
    "description": "长期增长投资组合",
    "cash": 15000.50,
    "positions": [
      {
        "ticker": "AAPL",
        "shares": 10,
        "averagePrice": 150.0,
        "currentPrice": 175.25,
        "marketValue": 1752.50,
        "profit": 252.50,
        "profitPercentage": 16.83
      }
    ],
    "totalValue": 16753.00,
    "metrics": {
      "returnRate": 11.69,
      "volatility": 12.45,
      "sharpeRatio": 0.82
    }
  }
}
```

#### 5.2.2 优化投资组合

**端点**: `/api/portfolio/optimize`

**方法**: `POST`

**请求体**:
```json
{
  "portfolioId": "portfolio123",
  "optimizationTarget": "sharpe"
}
```

**响应**:
```json
{
  "success": true,
  "data": {
    "currentAllocation": [ /* 当前配置 */ ],
    "optimizedAllocation": [ /* 优化后配置 */ ],
    "suggestedActions": [
      {
        "ticker": "AAPL",
        "action": "buy",
        "shares": 5,
        "estimatedCost": 876.25
      }
    ],
    "expectedMetrics": {
      "returnRate": 12.45,
      "volatility": 11.75,
      "sharpeRatio": 0.94
    }
  }
}
```

### 5.3 交易API

**端点**: `/api/trade`

**方法**: `POST`

**请求体**:
```json
{
  "portfolioId": "portfolio123",
  "action": "buy",
  "ticker": "AAPL",
  "shares": 5,
  "priceLimit": 180.0
}
```

**响应**:
```json
{
  "success": true,
  "data": {
    "transactionId": "tx12345",
    "portfolioId": "portfolio123",
    "action": "buy",
    "ticker": "AAPL",
    "shares": 5,
    "price": 175.25,
    "totalCost": 876.25,
    "timestamp": "2023-05-15T14:30:45Z",
    "status": "completed"
  }
}
```

## 6. 常见问题解答

### 6.1 系统使用常见问题

**问题**: 如何开始使用LumosFund？
**回答**: 首先需要安装依赖并配置必要的API密钥。然后，启动应用并访问Web界面，从仪表盘开始浏览系统的各项功能。

**问题**: 是否需要编程知识才能使用？
**回答**: 不需要。LumosFund提供了用户友好的Web界面，使用者不需要编程知识就能使用大部分功能。当然，如果希望通过API进行二次开发，则需要相应的编程技能。

**问题**: 系统支持哪些股票市场？
**回答**: 目前系统主要支持美国股票市场（纳斯达克、纽交所），后续将扩展到全球主要市场。

### 6.2 分析功能常见问题

**问题**: AI代理的投资建议有多准确？
**回答**: AI代理的建议基于历史数据和当前市场情况，提供的是参考意见而非绝对准确的预测。用户应结合自身风险承受能力和投资目标做出决策。

**问题**: 分析一支股票需要多长时间？
**回答**: 一般情况下，完整分析一支股票需要10-30秒，取决于所选分析维度和服务器负载情况。

**问题**: 可以同时分析多只股票吗？
**回答**: 可以。系统支持批量分析功能，可以同时分析多达10只股票，结果将按顺序展示。

### 6.3 投资组合功能常见问题

**问题**: 如何导入现有投资组合？
**回答**: 在投资组合页面，点击"导入"按钮，然后可以通过CSV文件上传或手动输入方式导入现有持仓数据。

**问题**: 投资组合优化算法是如何工作的？
**回答**: 系统使用现代投资组合理论(MPT)和蒙特卡洛模拟来优化资产配置，根据用户选择的优化目标（最大夏普比率、最小风险或最大回报）生成优化方案。

**问题**: 系统会自动执行交易吗？
**回答**: 不会。系统仅提供分析和建议，所有交易决策和执行都需要用户手动确认。 